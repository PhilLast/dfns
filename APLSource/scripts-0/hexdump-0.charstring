â Hex dump of native file.

â Hexdump uses ââ† and â†â for input/output. For testing, we modify
â the  temporary copy  of the function in this namespace to input
â from variable âˆ†i and output to variable âˆ†o.

âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
    âˆ†inâ†{                               â input from buffer         â
        nlâ†âŠƒâŒ½â•tc                                                    â
        inâ†(âˆ§\nlâ‰ âˆ†i)/âˆ†i                                             â
        bufâ†âµ,in                                                    â
        âˆ†o,â†buf,nl                                                  â
        {buf}âˆ†iâˆ˜â†(1+â´in)â†“âˆ†i                                         â
    }                                                               â
                                                                    â
    qpâ†'ââŠ£ââ†' 'âˆ†in'âˆ˜subs                â subs quote quad prompt    â
    qtâ†'ââ†' '_â†{âˆ†o,â†âµ}'âˆ˜subs            â subs quote quad output    â
                                                                    â
    _â†â•fx qt qp â•cr'hexdump'            â modify function.          â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ

    makeâ†{                              â make test file.
        22::âµ  â•ncreate 0               â create if not already there.
        tieâ†âµ  â•ntie 0                  â attempt to tie and
        {tie}0 â•nresize tie             â   empty file.
    }

    nfidâ†'hexdump test file'            â test file.
    ntieâ†make nfid                      â create file.
    _â†(323typeâ³4)â•nappend ntie          â 32-bit words 1 2 3 4
    _â†'hexdump test'â•nappend ntie       â char vector
    _â†(323type 0 Â¯1)â•nappend ntie       â 32-bit words 0Â·Â·0  fÂ·Â·f
    â•nsize ntie
36
    _â†â•nuntie ntie                      â release

â accumulate from script:

    inâ†{{1:}_in,â†âµ,âŠƒâŒ½â•tc}               â append command.

â Command Stream:

    _inâ†''                              â null cmd vector.
    in'\\0\â•dw=0'
    in'                          â base' 
    in'100\âŠ¥\10\0\!\âŠ¥'
    in'c *                       â indirect'
    in'?                         â help'
    in'                          â arithmetic:'
    in'+10\-8\Ã—5\Ã·3\%10'
    in'''msg''                     â message'
    in'msg=''hello\               world'''
    in'msg                       â multi-msg'
    in'along = )+4(              â macro defn'
    in'(                         â call'
    in'100                      â go 100'
    in'along                    â macro call'
    in')                        â retn'
    in'(1 :+ :- :Ã— :Ã·)4          â select case'
    in'0(âŠ¤(0:+4))                â trace'
    in'<sub                      â include subscript'
    in'<sub1                     â test <indentation'
    in'eh                        â error'
    in'reps=(::dec-1reps)'
    in'9reps'
    in'1000hex                   â conv dec to hex\0'
    in'(10 ascs)'
    in'(2+\(\3)\)'
    in'1+(1+(1+1))               â right arg'
    in'â•dw=2                     â 2 cols'
    in'â†dead'
    in'(8â†(beefÃ—10000))'
    in'0â•dw=0'
    in'sum âµ = + âµ'
    in'2 sum 3'
    in'oscâµ=(âµ dec'' ''::1:(âµ%2:osc(âµÃ·2):osc(âµÃ—3+1)))'
    in'osc 7'
    in')'
    
â Input and output buffers:

    âˆ†iâ†'\'(âŠƒâŒ½â•tc)subs _in
    âˆ†oâ†''

â subscripts:

    subâ†'''hello world'''         â subscript.

    sub1â†'\'(âŠƒâŒ½â•tc)subs 'ok='':-(''\â\        <sub2\        ok='':-)''\ok'
    sub2â†'sub2='

â chars script:

    _inâ†''                              â null cmd vector.
    in'ascs=(*%100::(*%100 asc) +1 ascs)       â ASCII string from file.'
    in''
    in'asc=(                                   â ASCII char translation.'
    in'    :''âŒ·'':'''':'''':'''':'''':'''':'''':'''':''Â·'':''	'':'''
    in'                                             ''  :''âŒ¶'':'''':''Â·'':''É«'':''^'''
    in'    :''Ã˜'':''Ã‰'':''Ãœ'':''Ã€'':''Ã–'':''Ã‘'':''Ã†'':''Ã¸'':''Ã„'':''Ã…'':''Ã­'':'''':''Â´'':''âˆ£'':'''':'''''
    in'    :'' '':''!'':''"'':''#'':''$'':''%'':''&'':'''''''':''('':'')'':''*'':''+'':'','':''-'':''.'':''/'''
    in'    :''0'':''1'':''2'':''3'':''4'':''5'':''6'':''7'':''8'':''9'':'':'':'';'':''<'':''='':''>'':''?'''
    in'    :''@'':''A'':''B'':''C'':''D'':''E'':''F'':''G'':''H'':''I'':''J'':''K'':''L'':''M'':''N'':''O'''
    in'    :''P'':''Q'':''R'':''S'':''T'':''U'':''V'':''W'':''X'':''Y'':''Z'':''['':''\'':'']'':''âˆ§'':''_'''
    in'    :''`'':''a'':''b'':''c'':''d'':''e'':''f'':''g'':''h'':''i'':''j'':''k'':''l'':''m'':''n'':''o'''
    in'    :''p'':''q'':''r'':''s'':''t'':''u'':''v'':''w'':''x'':''y'':''z'':''{'':''|'':''}'':''~'':'''''
    in'    :''âŠ¢'':''âŠ£'':''âŠ¤'':''âŠ¥'':''â†'':''â†’'':''â†‘'':''â†“'':''â‰¤'':''â‰¥'':''â²'':''â±'':''â•'':''â'':''âŒ¹'':''â™'''
    in'    :''â«'':''âˆ†'':''âˆ‡'':''â‹'':''â’'':''â•'':''â'':''âŒˆ'':''âŒŠ'':''â€'':''âŒ¿'':''âŠ‚'':''âŠƒ'':''âˆ©'':''âˆª'':''âˆ¨'''
    in'    :''Â '':''Â¡'':''Â¢'':''Â£'':''âŠ¢'':''Â¥'':''âŒ·'':''Â§'':''Â¨'':''â'':''â‹„'':''â¬'':''â‰ '':''â‰¡'':''âª'':''Â¯'''
    in'    :''âˆ˜'':''â—‹'':''âŒ½'':''â‰'':''âŠ–'':''âŸ'':''Â¶'':''Â·'':''âº'':''âˆŠ'':''â·'':''â‰¢'':''â³'':''â´'':''âµ'':''Â¿'''
    in'    :''â””'':''Ã'':''Ã‚'':''Ãƒ'':''â”´'':''â”¬'':''â”œ'':''Ã‡'':''Ãˆ'':''â”'':''ÃŠ'':''Ã‹'':''ÃŒ'':''Ã'':''Ã'':''Ã'''
    in'    :''Ã'':''â”€'':''Ã’'':''Ã“'':''Ã”'':''Ã•'':''â”¼'':''Ã—'':''â”˜'':''Ã™'':''Ãš'':''Ã›'':''â”Œ'':''Ã'':''Ã¾'':''ÃŸ'''
    in'    :''Ã '':''Ã¡'':''Ã¢'':''Ã£'':''Ã¤'':''Ã¥'':''Ã¦'':''Ã§'':''Ã¨'':''Ã©'':''Ãª'':''Ã«'':''Ã¬'':''â”‚'':''Ã®'':''Ã¯'''
    in'    :''Ã°'':''Ã±'':''Ã²'':''Ã³'':''Ã´'':''Ãµ'':''Ã¶'':''Ã·'':''â”¤'':''Ã¹'':''Ãº'':''Ã»'':''Ã¼'':''Ã½'':''â¨'':''â£'''
    in'    )'
    charsâ†_in

â hexdec script:

    _inâ†''
    in'dec = (:''0'':''1'':''2'':''3'':''4'':''5'':''6'':''7'':''8'':''9'':(Ã·a dec)(%a dec))'
    in''
    in'hex ='
    in'     . = Ã·10 sub Ã— a +'
    in'     sub = (::(%10:.0:.1:.2:.3:.4:.5:.6:.7:.8:.9))'
    in'     sub'
    hexdecâ†_in

    ('â†',chars,hexdec)hexdump nfid â‹„ âˆ†o             â accumulated output.
00000000:Â·00000001 00000002 00000003 00000004Â·         
00000010:Â·64786568 20706d75 74736574 00000000Â·         
00000020:Â·ffffffffÂ·0                                   
00000000:Â·00000001 00000002 00000003 00000004Â·â•dw=0    
00000000:Â·                          â base             
00000000:Â·100                                          
00000100:Â·âŠ¥                                            
00000100:Â·10                                           
00000110:Â·0                                            
00000100:Â·!                                            
00000000:Â·âŠ¥                                            
00000000:Â·c *                       â indirect         
00000004:Â·?                         â help             
    hex   set file position.                           
  + hex   increment.                                   
  - hex   decrement.                                   
  Ã— hex   multiply.                                    
  Ã· hex   integer divide.                              
  % hex   integer remainder.                           
  (       call.                                        
  )       return.                                      
  *       get word from file.                          
  â† hex   put word to file.                            
  âŠ¥       set base address.                            
  !       absolute position.                           
  : case  select case.                                 
  'Â·Â·Â·'   display message.                             
  ?       help.                                        
  < var   include subscript.                           
  âŠ¤       trace on/off.                                
  â       comment.                                     
   name = niladic macro.                               
 name âµ = monadic macro.                               
    â•dw = display width 0-8.                           
    â•be = big-endian 0/1.                              
00000004:Â·                          â arithmetic:      
00000004:Â·+10                                          
00000014:Â·-8                                           
0000000c:Â·Ã—5                                           
0000003c:Â·Ã·3                                           
00000014:Â·%10                                          
00000004:Â·'msg'                     â message          
msg                                                    
00000004:Â·msg='hello                                   
               world'                                  
00000004:Â·msg                       â multi-msg        
hello                                                  
world                                                  
00000004:Â·along = )+4(              â macro defn       
00000004:Â·(                         â call             
00000004:Â·Â·100                      â go 100           
00000100:Â·Â·along                    â macro call       
00000008:Â·Â·)                        â retn             
00000008:Â·(1 :+ :- :Ã— :Ã·)4          â select case      
00000004:Â·0(âŠ¤(0:+4))                â trace            
00000000âŠ¤Â·Â·(0:+4))                â trace              
00000000âŠ¤Â·Â·Â·0:+4))                â trace              
00000000âŠ¤Â·Â·Â·:+4))                â trace               
00000000âŠ¤Â·Â·Â·)+4)                â trace                
00000000âŠ¤Â·Â·+4)                â trace                  
00000000âŠ¤Â·Â·4)                â trace                   
00000004âŠ¤Â·Â·)                â trace                    
00000000:Â·<sub                      â include subscript
hello world                                            
00000000:Â·<sub1                     â test <indentation
:-)                                                    
00000000:Â·eh                        â error            
eh?                                                    
00000000:Â·reps=(::dec-1reps)                           
00000000:Â·9reps                                        
987654321                                              
00000000:Â·1000hex                   â conv dec to hex  
000003e8:Â·0                                            
00000000:Â·(10 ascs)                                    
hexdump test                                           
00000000:Â·(2+                                          
00000002:Â·Â·(                                           
00000002:Â·Â·Â·3)                                         
00000005:Â·Â·)                                           
00000000:Â·1+(1+(1+1))               â right arg        
00000004:Â·â•dw=2                     â 2 cols           
00000004:Â·00000002 00000003Â·â†dead                      
00000004:Â·0000dead 00000003Â·(8â†(beefÃ—10000))           
00000004:Â·0000dead beef0000Â·0â•dw=0                     
00000000:Â·sum âµ = + âµ                                  
00000000:Â·2 sum 3                                      
00000005:Â·oscâµ=(âµ dec' '::1:(âµ%2:osc(âµÃ·2):osc(âµÃ—3+1))) 
00000005:Â·osc 7                                        
7 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1           
00000001:Â·)                                            
                                                       
    _â†nfid â•nerase nfid â•ntie 0     â remove file.
